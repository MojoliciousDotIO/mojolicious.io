<!DOCTYPE html>
<!--[if lt IE 8 ]><html class="no-js ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="no-js ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 8)|!(IE)]><!--><html class="no-js" lang="en"> <!--<![endif]-->
<head>

  <meta charset="utf-8">
  <meta content="" name="description">

  <meta content="width=device-width, initial-scale=1, maximum-scale=1" name="viewport">

  <link href="/theme/css/default.css" rel="stylesheet">
  <link href="/theme/css/layout.css" rel="stylesheet">
  <link href="/theme/css/media-queries.css" rel="stylesheet">
  <link href="/theme/css/statocles.css" rel="stylesheet">

  <!-- twitter and opengraph -->
  <meta content="summary" name="twitter:card">
      <meta content="@joelaberger" name="twitter:creator">
  <meta content="https://mojolicious.io/blog/2021/02/14/announcing-mojolicious-9-0/" property="og:url">
  <meta content="Announcing Mojolicious 9.0" property="og:title">
    <meta content="Announcing release of Mojolicious version 9.0" property="og:description">
    <meta content="https://mojolicious.io/blog/2021/02/14/announcing-mojolicious-9-0/nine_point_oh.png" property="og:image">
    <meta content="summary_large_image" name="twitter:card">

  <script src="/theme/js/modernizr.js"></script>

      <link href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/sunburst.min.css" rel="stylesheet">

  <title>Announcing Mojolicious 9.0 - mojolicious.io</title>
  <meta content="Joel Berger" name="author">
  <meta content="Statocles 0.098" name="generator">
  <link href="/static/favicon.ico" rel="shortcut icon">
  
  
</head>

<body>

   <header>

      <div class="row">

         <div class="twelve columns">

            <div class="logo">
               <a href="/index.html">
                 <h3 style="color: #fff">mojolicious.io</h3>
               </a>
            </div>

            <nav id="nav-wrap">

              <a class="mobile-btn" href="#nav-wrap" title="Show navigation">Show navigation</a>
              <a class="mobile-btn" href="#" title="Hide navigation">Hide navigation</a>

               <ul class="nav" id="nav">
                 <!-- li.current is given a different styling -->
                   <li><a href="/">Blog</a></li>
                   <li><span><a href="/page/advent/2018">Advent Calendar</a></span>
                     <ul>
                       <li><a href="/page/advent/2018">2018</a></li>
                       <li><a href="/page/advent/2017">2017</a></li>
                      </ul>
                   </li>
                   <li><span><a href="https://mojolicious.org">mojolicious.org</a></span>
                     <ul>
                       <li><a href="https://docs.mojolicious.org">Documentation</a></li>
                       <li><a href="https://docs.mojolicious.org/Mojolicious/Guides/Tutorial">Tutorial</a></li>
                      </ul>
                   </li>

               </ul>

            </nav>

         </div>

      </div>

   </header>

     <div id="page-title">

  <div class="row">

      <div class="ten columns centered text-center">
        <h1>The Mojolicious Blog<span>.</span></h1>

        <p>A semi-official blog dedicated to the Mojolicious web framework</p>
      </div>

  </div>

</div>



<div class="content-outer">

  <div class="row" id="page-content">

      <div class="eight columns" id="primary">

        <article class="post">

            <div class="entry-header cf">

              <h1>Announcing Mojolicious 9.0</h1>

              <p class="post-meta">

                  <time class="date" datetime="2021-02-14">Feb 14, 2021</time>
                  

              </p>

            </div>

              <div class="post-thumb">
                <!-- theme suggests 1300x500 -->
                <img alt="Mojolicious cloud with text &quot;nine point oh&quot;" src="/blog/2021/02/14/announcing-mojolicious-9-0/nine_point_oh.png">
              </div>

            <div class="post-content">

              <section id="section-1">
                  <p>The Mojolicious Core Team is delighted to announce the release and immediate availability of version 9.0 of the <a href="https://mojolicious.org">Mojolicious</a> real-time web framework.
Every Mojolicious major release has a <a href="https://docs.mojolicious.org/Mojolicious#CODE-NAMES">code name</a> based on a unicode character and this one is lovingly named &quot;Waffle&quot; ðŸ§‡!</p>

<p>Every major release I think that there can&#39;t be much more to add or change in Mojolicious and then when the next one arrives I reflect on how much has changed since I last thought that.
In <a href="https://metacpan.org/release/SRI/Mojolicious-9.0">9.0</a> there&#39;s far too much to discuss each at length, so I&#39;m going to highlight some of my favorites and then include a distilled list of changes since 8.0.</p>

<h2>Perl 5.16 and beyond</h2>

<p>Mojolicious now requires Perl version 5.16. This change gives us useful tools to build Mojolicious including the <code>__SUB__</code> token for building self-referential callbacks without leaking.
We were pleased that the community response since the change a few months ago has been ... well crickets.
This is great news since we do hope to move to Perl 5.20 in the not so distant future so that we can use Perl&#39;s native signatures once that is a sound option for us.
We are already encouraging the use of signatures both in the documentation and in our code generation commands.</p>

<h2>Asynchronous Functionality</h2>

<p>Clearly the highlight of the pre-9.0 development cycle has been the integration of Async/Await.
Thanks to Paul Evans (LeoNerd)&#39;s efforts, when you have <a href="https://metacpan.org/pod/Future::AsyncAwait">Future::AsyncAwait</a> installed Mojolicious can use its new keywords <code>async</code> and <code>await</code> to provide the most seamless asynchronous development possible, something that is becoming more and more the standard for asynchronous code in other languages.
Writing a non-blocking endpoint is now as simple as</p>

<pre><code>use Mojolicious::Lite -signatures, -async_await;

# Request HTML titles from two sites non-blocking
get &#39;/&#39; =&gt; async sub ($c) {
  my $mojo_tx    = await $c-&gt;ua-&gt;get_p(&#39;https://mojolicious.org&#39;);
  my $mojo_title = $mojo_tx-&gt;result-&gt;dom-&gt;at(&#39;title&#39;)-&gt;text;
  my $cpan_tx    = await $c-&gt;ua-&gt;get_p(&#39;https://metacpan.org&#39;);
  my $cpan_title = $cpan_tx-&gt;result-&gt;dom-&gt;at(&#39;title&#39;)-&gt;text;

  $c-&gt;render(json =&gt; {mojo =&gt; $mojo_title, cpan =&gt; $cpan_title});
};

app-&gt;start;
</code></pre>

<p>When I teach non-blocking to people I can now tell them to follow a trivial recipe for most non-blocking tasks.
Simply <code>await</code> any function that returns a promise and mark any function that uses <code>await</code> with the <code>async</code> keyword.
Note also that all <code>async</code> functions return promises so <code>await</code> any calls to them.
There are some optimizations you can make at times and top-level <code>await</code> (if you aren&#39;t in a Mojolicious webapp) can be a little strange but to a first approximation that&#39;s all you need to write a non-blocking webapp today!</p>

<p>Speaking of promises (which are at the heart of Async/Await), Mojo::Promise has grown a lot this cycle too, adding <code>all_settled</code>, <code>any</code>, <code>map</code>, <code>timer</code>, and <code>timeout</code> class methods, changing its constructor to be more like the one in JavaScript and to warn when an unhandled rejected promise is destroyed.
The latter can help in development where such cases used to hide errors, now, much like the browser, you can at least find where things are going wrong even if you didn&#39;t wire all your promises to a catch callback like you should.</p>

              </section>
              <section id="section-2">
                  <h2>Focus on Containerization and Cloud Deployments</h2>

<p>The Mojolicious Core Team is aware that more and more deployments are in containers and cloud services these days and we&#39;ve been thinking of ways to make that easier.
With 9.0 we&#39;ve added two new features specifically designed to help with these types of deployments.</p>

<p>Most existing applications assume a standard deployment by an unprivileged user behind a reverse proxy, but with new deployment strategies the number of configurations an application might expect are too numerous to expect each application to support.
To address this we&#39;ve added support for <a href="https://docs.mojolicious.org/Mojolicious/Guides/Cookbook#Deployment-specific-plugins">deployment specific plugins</a> that help you add deployment-level functionality to existing applications.
Now the deployer is in control of these features, rather than needing to ask the application author to add support.</p>

<p>We&#39;ve also extended the existing <a href="https://docs.mojolicious.org/Mojolicious/Guides/Cookbook#Reverse-proxy">reverse proxy</a> support to allow for multiple trusted proxies, specifically when you know what the expected IP address or CIDR network you&#39;re expecting proxy requests from.
This can be useful both when deploying from say Kubernetes where it is likely you&#39;ll have several layers of local proxies, or when you&#39;re behind a third-party proxy like CloudFlare, who publish a list of their proxy networks.
This is an important safety feature in these situations, blindly trusting forwarding headers can lead to <a href="https://twitter.com/logicbomb_1/status/1354452751619559428">big problems</a>.</p>

<p>Also, we&#39;ve noticed that many cloud deployment tools are based on YAML, so we&#39;ve added a YAML configuration file loader to our existing Perl and JSON configuration loaders.
Because YAML is a tricky target and because ours is technically not-quite-YAML, we&#39;ve called ours cheekily <a href="https://docs.mojolicious.org/Mojolicious/Plugin/NotYAMLConfig">NotYAMLConfig</a>.
In the unlikely event that that distinction should matter for your needs, you can load a specific YAML module from CPAN.</p>

<p>But it isn&#39;t just functionality, we&#39;ve added a Dockerfile generation (<code>myapp generate dockerfile</code>) and added a Container <a href="https://docs.mojolicious.org/Mojolicious/Guides/Cookbook#Containers">Cookbook recipe</a> to the documentation.
We&#39;ve also added a <a href="https://docs.mojolicious.org/Mojolicious/Guides/Cookbook#Envoy">Cookbook recipe</a> for the popular cloud-native proxy <a href="https://www.envoyproxy.io/">Envoy</a>.
If you have other common container or cloud recipes that you think should be added, please let us know!</p>

<h2>Documentation Improvements</h2>

<p>Speaking of documentation, you might have noticed that both our <a href="https://docs.mojolicious.org">documentation site</a> and <a href="https://twitter.com/perlmojo/status/1343932370106392577/photo/1">built-in templates</a> for 404 and 500 pages have gotten a face lift.</p>

<blockquote class="twitter-tweet"><p dir="ltr" lang="en">The Mojolicious 8.69 release brings redesigned exception and not_found pages with a fresh new look, enjoy. <a href="https://t.co/MHzvYnBJJw">pic.twitter.com/MHzvYnBJJw</a></p>â€” Mojolicious (@perlmojo) <a href="https://twitter.com/perlmojo/status/1343932370106392577?ref_src=twsrc%5Etfw">December 29, 2020</a></blockquote>

<p><script async charset="utf-8" src="https://platform.twitter.com/widgets.js"></script></p>

<p>They&#39;re even prettier and easier to read than before, they&#39;re responsive, and they have a newer code library (highlight.js) to better render our code.
Further the documentation site is now redeployed immediately on any push to master of the website or the main Mojolicious projects, <code>mojolicious</code>, <code>mojo-pg</code>, and <code>minion</code>, so that you always have the most up-to-date docs at your fingertips.</p>

<p>Along with the container and cloud-native changes I&#39;ve already highlighted, we have updated our documentation to use of upcoming Perl native signatures throughout and paired it with updating our <code>app</code> and <code>lite-app</code> generators to generate applications with signatures too.</p>

<h2>Routing (and Rendering)</h2>

<p>The routing engine is an often overlooked part of a web framework but it really is at the heart of everything that it does.
It can also be a source of confusion or frustration, especially when it doesn&#39;t do what you expect.
For 9.0 we&#39;ve made the router both safer and more closely aligned to user expectations.</p>

<p>The biggest change is that Mojolicious now prevents applications from using reserved placeholders in routes.
This was originally considered a &quot;feature&quot; because it allowed very terse route definitions for quick apps, but in practice most people that understood how that worked just used the long form while unsuspecting newcomers would trip on it from time to time.
We&#39;ve also made several cases throw exceptions when routing would fail that used to fail silently or unexpectedly.
When a route points to a missing controller, a namespace without a controller or a controller without an action, you now get an exception rather than a 404, which would often confuse people.
Additionally, you get an exception when when auto-rendering fails or a call to render cannot render a response, which would appear to hang (while it actually was trying to wait for a delayed response that was never going to happen).</p>

<p>We&#39;ve even simplified some of the routing method names themselves.
We&#39;ve removed the lesser-used <code>detour</code> and <code>route</code> methods in favor of the more generic <code>any</code> method.
We&#39;ve renamed method that designates which HTTP methods to respond to (usually when picking several but not all of them, e.g. <code>GET</code> and <code>POST</code> but not <code>any</code>) from <code>via</code> to <code>methods</code>.
We&#39;ve also renamed the method that designates conditional routing from <code>over</code> to <code>requires</code>.
I&#39;m especially excited about this one since <code>over</code> implied a contrast with the commonly used <code>under</code> method, where no such contrast is meant to be implied; they do very different things.</p>

<h2>Logging</h2>

<p>The big one for me is that Mojolicious now is capable of sanely using a contextual logger!
Mojolicious applications have a <code>log</code> attribute that holds a <code>Mojo::Log</code> instance, however that logger is global to the application and any context you&#39;d want to add is only for a given request/response cycle.
Unlike blocking frameworks, a Mojolicious app might switch between several requests before any are rendered, meaning manually keeping context attached to that global logger was nearly impossible.
With 9.0 we now have the ability to use a per-controller &quot;child&quot; logger which descends from the global logger and still logs via it, but can keep its own context information.
It feeds that information to its parent when you log from it.</p>

<p>By default, these child loggers now have a random request id attached to it, however you can put whatever context you&#39;d like to add there.
You can also pass these loggers (themselves an instance of <code>Mojo::Log</code>) to models or other code that might want to log with that context attached.</p>

<p>We&#39;ve also improved logging performance in cases where generating the log message is expensive and useless if the log level means that the log message is not emitted.
If you pass a closure (code reference) to the logger&#39;s <code>debug</code>, <code>info</code>, <code>warn</code>, <code>error</code>, and <code>fatal</code> methods and the logger will only invoke that closure if the log level check is met.
In fact this improved Mojolicious&#39; own performance metrics by 10%!</p>

<pre><code>$c-&gt;log-&gt;debug(sub{ &#39;Thought you might want to know: &#39; . generate_expensive_log_output() });
</code></pre>

<p>Please note that we have changed the log format slightly so be aware if you care about such things.</p>

<p>And to simplify things, we&#39;ve removed the confusing behavior of logging to a file if a <code>log</code> directory exists.
While it sometimes did what people wanted, it more often than not confused newcomers who couldn&#39;t find their logs.
The behavior now is to always log to <code>STDERR</code> but you can easily change it to point the file of your choice while your application is starting up.</p>

<h2>Proxy Helpers</h2>

<p>How often have you written an application which takes a request from a client, makes a request of another server, then responds back to the client with the result?
I&#39;ve done that quite often.
While it may seem trivial to do, there can be some subtle problems like what do you do if the read and write speeds mismatch badly enough?
Never thought about that?
Well you don&#39;t have to anymore.</p>

<p>Mojolicious now comes with proxy helpers, the generic <a href="https://docs.mojolicious.org/Mojolicious/Plugin/DefaultHelpers#proxy-start_p"><code>proxy-&gt;start_p</code></a> and the shortcuts <code>proxy-&gt;get_p</code> and <code>proxy-&gt;post_p</code> for common GET and POST requests.
Proxying a GET request in an action can now be as simple as</p>

<pre><code>$c-&gt;proxy-&gt;get_p(&#39;http://mojolicious.org&#39;)-&gt;catch(sub ($err) {
  $c-&gt;log-&gt;debug(&quot;Proxy error: $err&quot;);
  $c-&gt;render(text =&gt; &#39;Something went wrong!&#39;, status =&gt; 400);
});
</code></pre>

<p>while using <code>start_p</code> you can customize the transactions to your exact needs by subscribing to available events.
See the linked documentation for an example.</p>

<h2>Mojo::DOM</h2>

<p>CSS Selectors are amazing, but one major failing is that you can only extract the last element in your selector, not something in the middle.
Or to put it another way, they lack is the ability to conditionally match an element based on a property of its children.
Well CSS4 proposes something that lets you assert just such a condition, the <code>:has</code> pseudo-class.</p>

<p>Without it, if you wanted to find all the links that have images as their content, you&#39;d have to match <code>a &gt; img</code> and traverse back up to the parent (which gets even harder if it isn&#39;t a direct child, e.g. <code>a img</code>).
However now you can simply do something like</p>

<pre><code>$ mojo get https://mojolicious.org &#39;a:has(&gt; img)&#39; attr href
</code></pre>

<p>for only direct descendants or</p>

<pre><code>$ mojo get https://mojolicious.org &#39;a:has(img)&#39; attr href
</code></pre>

<p>to see all such links.
In its syntax, the inner selector is a &quot;relative selector&quot; where the <code>a</code> element in question, called the <code>:scope</code>, is implicitly a &quot;virtual root&quot;.</p>

<pre><code>$ mojo get https://mojolicious.org &#39;a:has(:scope &gt; img)&#39; attr href
</code></pre>

<p>would be the same query.</p>

<p>Another neat feature we&#39;ve imported from CSS4 is the <code>:is</code> pseudo-class.
In CSS3 you can &quot;or&quot; together several queries with a comma, but only for each query as a whole.
If you wanted to search for <code>h1</code> elements inside of other tags, you&#39;d have to do for example <code>section h1, article h1, aside h1, nav h1</code>.
CSS4 gives you the <code>:is</code> pseudo-class that lets you group logical portions of a selector together so you can make a more concise and comprehensible query.
The previous example can be rewritten as <code>:is(section, article, aside, nav) h1</code>.</p>

<p>Now you&#39;ve seen that I&#39;ve mentioned that these are CSS4 features but CSS4 is not yet had a stable release, it is still being changed and updated.
Mojolicious supports these selectors (and a few others from CSS4) but they will continue to be marked as experimental until the spec is released officially.
Until then they might be changed or removed as the CSS4 spec changes.</p>

<h2>Team and Process</h2>

<p>During the 9.0 development cycle the team grew!
We&#39;ve welcomed CandyAngel and Christopher Rasch-Olsen Raa (mishanti1) and welcomed back Dan Book (Grinnz).
We&#39;re very happy to have them!</p>

<p>We&#39;ve also added some automation.
In addition to the documentation site that I&#39;ve already mentioned, and existing test runners, we&#39;ve also added a perltidy check so that all PRs conform to our <a href="https://docs.mojolicious.org/Mojolicious/Guides/Contributing#Rules">rules</a> about it.
We also simplified our PR process so that if a PR gets two approvals from the team it is automatically merged.
This is a wonderful process boost since it encourages PRs to be reviewed and ensures that PRs with interest can see action quickly.</p>

<p>Finally, We&#39;re always looking for more help and to encourage people to do so, we&#39;ve decided to open the process somewhat.
We are encouraging people to review PRs even if you don&#39;t have review rights.
This will do two things for us, first it will give us more opinions both in regards to community interest and from people who might have technical knowledge of the topic.
Secondly, we&#39;ve started tracking who is reviewing PRs and if you catch our notice, you might be on track to join more officially.</p>

<p>If this sounds interesting, at any level, we hope to see you on our <a href="https://github.com/mojolicious/mojo/pulls">pulls page</a>.
While you are there, you might see that we&#39;ve enabled <a href="https://github.com/mojolicious/mojo/discussions">github discussions</a> as an alternative to (and possible eventual replacement for) our <a href="https://groups.google.com/g/mojolicious">mailing list</a>.</p>

<p>Thanks for reading this!
We hope you&#39;ll love Mojolicious 9.0!</p>

<hr>

<p>As promised here is a distillation of all the non-trivial <a href="https://github.com/mojolicious/mojo/blob/v9.0/Changes">Changes</a> since 8.0.</p>

<ul>
<li>Increased Perl version requirement to 5.16.0. This is just a first step however, at some point in the not so distant future we will increase the Perl version requirement to 5.20.0 for full subroutine signatures support</li>
<li>Async/Await
<ul>
<li>Requires <code>Future::AsyncAwait</code> 0.36</li>
<li>enable with <code>-async_await</code></li>
</ul></li>
<li><code>Mojo::Promise</code> enhancements
<ul>
<li>Added <code>all_settled</code>, <code>any</code>, <code>map</code>, <code>timer</code>, <code>timeout</code></li>
<li>constructor arguments more like Javascript</li>
<li>warn when unhandled rejected promise is destroyed</li>
<li>Added <code>MOJO_PROMISE_DEBUG</code> environment variable</li>
<li>Improved <code>wait</code> method in Mojo::Promise not to be affected by manually stopped event loops</li>
<li>Improved <code>eval</code> command with support for promises</li>
</ul></li>
<li>Docker
<ul>
<li><code>generate dockerfile</code> command</li>
<li>Container cookbook recipe</li>
</ul></li>
<li>Envoy deployment recipe</li>
<li>Trusted proxy support</li>
<li>Added support for deployment specific plugins</li>
<li>Disallowed the use of reserved stash values, such as <code>/:action</code>, in route patterns</li>
<li>Make routing safer and clearer
<ul>
<li>Throw exceptions for missing controllers</li>
<li>Disallowed namespace without controller for routing</li>
<li>Throw exceptions for routes with controllers but without action</li>
<li>Die if auto rendering failed or call to <code>$c-&gt;render</code> cannot render a response</li>
</ul></li>
<li>Cleaned up lesser-used router methods
<ul>
<li>Removed <code>detour</code>, <code>route</code> (use <code>any</code>)</li>
<li>Renamed <code>over</code> to <code>requires</code>, <code>via</code> to <code>methods</code></li>
</ul></li>
<li>Contextual logger
<ul>
<li>Added <code>log</code> helper to which builds a child logger with context (request id)</li>
<li>Added <code>context</code> method to <code>Mojo::Log</code></li>
</ul></li>
<li>Slightly changed log format (datetime format, process id, lines joined with spaces)</li>
<li>Removed automatically logging to <code>log/$mode.log</code> if log directory exists, default is always <code>STDERR</code> now</li>
<li>Improved log messages generated by Mojolicious to include request ids when possible</li>
<li>Improved <code>debug</code>, <code>error</code>, <code>fatal</code>, <code>info</code> and <code>warn</code> methods in Mojo::Log to accept closures to generate log messages on demand, so expensive code for debugging can be deactivated easily in production
<ul>
<li>Improved Mojolicious performance by up to 10% with more efficient logging</li>
</ul></li>
<li>Added support for YAML config files:
<ul>
<li>Added module <code>Mojolicious::Plugin::NotYAMLConfig</code></li>
<li>Improved app generator command to use a YAML config file</li>
</ul></li>
<li>Proxying with backpressure monitoring
<ul>
<li>Added <code>proxy-&gt;get_p</code>, <code>proxy-&gt;post_p</code> and <code>proxy-&gt;start_p</code> helpers</li>
<li>Added <code>high_water_mark</code> attribute in Mojo::IOLoop::Stream</li>
<li>Added <code>bytes_waiting</code> and <code>can_write</code> methods in Mojo::IOLoop::Stream</li>
</ul></li>
<li>Added EXPERIMENTAL support for SameSite cookies to better protect Mojolicious applications from CSRF attacks
<ul>
<li>Added EXPERIMENTAL <code>samesite</code> attributes to <code>Mojo::Cookie::Response</code> and <code>Mojolicious::Cookies</code></li>
</ul></li>
<li>Improved helper performance (<code>Mojo::DynamicMethods</code>)</li>
<li>Added <code>before_command</code> hook (expimental)</li>
<li><code>Mojo::DOM</code>
<ul>
<li><code>all_text</code> method now excludes <code>&lt;script&gt;</code> and <code>&lt;style&gt;</code> from text extraction in HTML documents</li>
</ul></li>
<li><code>Mojo::DOM::CSS</code>
<ul>
<li>Added <code>:scope</code>, <code>:has</code> (experimental)</li>
<li>Added <code>:is</code> (experimental)</li>
<li>Added <code>:any-link</code> (experimental)</li>
<li>Case-sensitive attribute selectors like <code>[foo=&quot;bar&quot; s]</code></li>
</ul></li>
<li><code>Mojo::IOLoop::Subprocess</code>
<ul>
<li>Added support for progress updates (<code>progress</code> method and event)</li>
<li>Added <code>run_p</code> method</li>
<li>Added <code>exit_code</code> method</li>
<li>Added <code>cleanup</code> event</li>
</ul></li>
<li>Improved <code>Mojolicious::Commands</code> to treat commands like <code>mojo generate lite_app</code> as <code>mojo generate lite-app</code></li>
<li><code>Test::Mojo</code>
<ul>
<li>Improved extenability and testability of <code>Test::Mojo</code> with <code>test</code> method and <code>handler</code> attribute</li>
<li>Added <code>attr_is</code>, <code>attr_isnt</code>, <code>attr_like</code> and <code>attr_unlike</code> methods</li>
<li>Added <code>header_exists</code> and <code>header_exists_not</code> methods</li>
</ul></li>
<li><code>Mojolicious::Validator</code>
<ul>
<li>Added <code>not_empty</code> filter</li>
<li>Simplify <code>size</code> check</li>
<li>Fixed validator to also validate empty string values instead of ignoring them. This behaviour had caused a lot of confusion in the past</li>
</ul></li>
<li>Added compression (gzip) functionality to <code>Mojolicious::Renderer</code> for dynamic content
<ul>
<li>activate with <code>Mojolicious::Renderer::compress</code> (see <a href="https://docs.mojolicious.org/Mojolicious/Guides/Rendering#Post-processing-dynamic-content">the Rendering Guide</a>)</li>
</ul></li>
<li>Improved <code>is_fresh</code> method in Mojolicious::Static with support for weak etags</li>
<li><code>Mojo::Exception</code>
<ul>
<li>Added support for <code>MOJO_EXCEPTION_VERBOSE</code> environment variable</li>
<li><code>raise</code>, <code>check</code> functions</li>
<li>include a stack trace in verbose output</li>
</ul></li>
<li><code>Mojo::Base</code>
<ul>
<li>Improved <code>Mojo::Base</code> flags not to require a certain order</li>
<li>Added support for weak reference accessors to <code>Mojo::Base</code></li>
<li>Improved <code>Mojo::Base</code> to enable the Perl 5.16 feature bundle with <code>unicode_strings</code>, <code>unicode_eval</code>, <code>evalbytes</code>, <code>current_sub</code> and <code>fc</code></li>
</ul></li>
<li><code>Mojo::Server::Daemon</code> (and thus the other servers) now differentiate between <code>inactivity_timeout</code> and <code>keep_alive_timeout</code></li>
<li><code>Mojo::Reactor::again</code> can now change the timeout for a retry</li>
<li>New conveniences
<ul>
<li>Added <code>Mojo::Util::network_contains</code></li>
<li>Added <code>Mojo::Util::scope_guard</code></li>
<li>Added <code>content_type</code> and <code>file_types</code> to <code>Mojolicious::Types</code></li>
<li>Added <code>extname</code>, <code>curfile</code>, <code>stat</code>, <code>lstat</code>, <code>remove</code>, and <code>touch</code> to <code>Mojo::File</code></li>
<li><code>humanize_bytes</code> in <code>Mojo::Util</code> and <code>Mojo::ByteStream</code></li>
<li>Added <code>head</code> and <code>tail</code> to <code>Mojo::Collection</code></li>
<li>Added <code>l</code> function to ojo</li>
<li>Added <code>save_to</code> method to Mojo::Message</li>
</ul></li>
<li>Website improvements
<ul>
<li>Style</li>
<li>Responsiveness</li>
<li>Replaced <code>prettify.js</code> with <code>highlight.js</code></li>
<li>auto-deployed on push to master</li>
</ul></li>
<li>Built-in templates <a href="https://twitter.com/perlmojo/status/1343932370106392577/photo/1">updated too</a></li>
<li>Encouraged signatures
<ul>
<li>Improved <code>app</code> and <code>lite_app</code> generators to use templates with subroutine signatures</li>
<li>Updated all documentation to use subroutine signatures</li>
</ul></li>
<li>Removed module Mojo::IOLoop::Delay
<ul>
<li>Spun out to CPAN for long term compat (but not continued development)</li>
</ul></li>
<li>Removed deprecated success method from <code>Mojo::Transaction</code> (use <code>!$tx-&gt;error</code> or <code>$tx-&gt;result</code>)</li>
<li>Cleaned up lesser used connection properties in <code>Mojo::UserAgent</code> and <code>Mojo::IOLoop::Client</code></li>
<li>Removed <code>config</code> stash value</li>
<li>Removed <code>Mojo::Collection::slice</code></li>
</ul>

              </section>

              <p class="tags">
                <span>Tagged in </span>:
                  <a href="/blog/tag/async-await/">async/await</a>,
                  <a href="/blog/tag/non-blocking/">non-blocking</a>,
                  <a href="/blog/tag/promises/">promises</a>,
                  <a href="/blog/tag/documentation/">documentation</a>,
                  <a href="/blog/tag/deployment/">deployment</a>,
                  <a href="/blog/tag/routing/">routing</a>
              </p>


                  <div class="bio cf">

                      <div class="gravatar">
                        <img alt="author image" src="https://secure.gravatar.com/avatar/cc767569f5863a7c261991ee5b23f147">
                      </div>
                      <div class="about">
                        <h5>Joel Berger</h5>
                        <p>Joel has Ph.D. in Physics from the University of Illinois at Chicago.
He an avid Perl user and <a href="https://metacpan.org/author/JBERGER">author</a> and is a member of the Mojolicious Core Team.</p>

                      </div>

                  </div>

              <ul class="post-nav cf">
                  <li class="prev"><a href="/blog/2019/12/26/announcing-core-async-await/index.html" rel="prev"><strong>Previous Article</strong> Announcing Core async/await</a></li>
              </ul>

            </div>

        </article>


      </div>

      <div class="four columns end" id="secondary">
        <aside id="sidebar">
          







<div class="widget widget_tag_cloud">
  <h5 class="widget-title">Tags</h5>
  <div class="tagcloud cf">
    <a href="/blog/tag/administration/">administration</a>
    <a href="/blog/tag/advent/">advent</a>
    <a href="/blog/tag/angular/">Angular</a>
    <a href="/blog/tag/api/">api</a>
    <a href="/blog/tag/app/">app</a>
    <a href="/blog/tag/async-await/">async/await</a>
    <a href="/blog/tag/authentication/">authentication</a>
    <a href="/blog/tag/caching/">caching</a>
    <a href="/blog/tag/carton/">carton</a>
    <a href="/blog/tag/command/">command</a>
    <a href="/blog/tag/controller/">controller</a>
    <a href="/blog/tag/css/">css</a>
    <a href="/blog/tag/dancer/">dancer</a>
    <a href="/blog/tag/dbix-class/">DBIx::Class</a>
    <a href="/blog/tag/debugging/">debugging</a>
    <a href="/blog/tag/deployment/">deployment</a>
    <a href="/blog/tag/development/">development</a>
    <a href="/blog/tag/documentation/">documentation</a>
    <a href="/blog/tag/example/">example</a>
    <a href="/blog/tag/fluent/">fluent</a>
    <a href="/blog/tag/full/">full</a>
    <a href="/blog/tag/graphql/">graphql</a>
    <a href="/blog/tag/growing/">growing</a>
    <a href="/blog/tag/headers/">headers</a>
    <a href="/blog/tag/hello-world/">hello world</a>
    <a href="/blog/tag/html/">html</a>
    <a href="/blog/tag/installing/">installing</a>
    <a href="/blog/tag/javascript/">JavaScript</a>
    <a href="/blog/tag/ldap/">LDAP</a>
    <a href="/blog/tag/lite/">lite</a>
    <a href="/blog/tag/minion/">minion</a>
    <a href="/blog/tag/mocking/">mocking</a>
    <a href="/blog/tag/model/">model</a>
    <a href="/blog/tag/mojoconf/">mojoconf</a>
    <a href="/blog/tag/non-blocking/">non-blocking</a>
    <a href="/blog/tag/non-web/">non-web</a>
    <a href="/blog/tag/openapi/">openapi</a>
    <a href="/blog/tag/promises/">promises</a>
    <a href="/blog/tag/psgi/">psgi</a>
    <a href="/blog/tag/rendering/">rendering</a>
    <a href="/blog/tag/rest/">rest</a>
    <a href="/blog/tag/roles/">roles</a>
    <a href="/blog/tag/routing/">routing</a>
    <a href="/blog/tag/session/">session</a>
    <a href="/blog/tag/swagger/">swagger</a>
    <a href="/blog/tag/templates/">templates</a>
    <a href="/blog/tag/testing/">testing</a>
    <a href="/blog/tag/theme/">theme</a>
    <a href="/blog/tag/useragent/">useragent</a>
    <a href="/blog/tag/wishlist/">wishlist</a>
    <a href="/blog/tag/xml/">xml</a>
    <a href="/blog/tag/yancy/">yancy</a>
  </div>
</div>



        </aside>
      </div>

   </div>

</div>


   <footer>

      <div class="row">

         <div class="twelve columns">

            <ul class="footer-nav">
                <li><a href="/">Blog.</a></li>
                <li><a href="/page/advent/2018">Advent Calendar.</a></li>
                <li><a href="https://mojolicious.org">mojolicious.org.</a></li>
            </ul>

            <ul class="footer-social">
               <li><a href="https://github.com/mojolicious/mojo"><i class="fa fa-github"></i></a></li>
               <li><a href="https://twitter.com/search?q=%23mojolicious"><i class="fa fa-twitter"></i></a></li>
               <li><a href="/blog/index.rss"><i class="fa fa-rss"></i></a></li>
            </ul>

            <ul class="copyright">
                 <li>Copyright Â© 2017-2020 Joel Berger</li>
                <li><a href="https://github.com/MojoliciousDotIO/mojolicious.io">Contribute to this site on Github</a></li>
               <li>Design by <a href="http://www.styleshout.com/">Styleshout</a></li>
               <li>Made with <a href="http://preaction.me/statocles">Statocles</a></li>
               <li>Powered by <a href="http://www.perl.org">Perl</a></li>
            </ul>

         </div>

         <div id="go-top" style="display: block;"><a href="#" title="Back to Top">Go To Top</a></div>

      </div>

   </footer>

   <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
   <script>window.jQuery || document.write('<script src="/theme/js/jquery-1.10.2.min.js"><\/script>')</script>
   <script src="/theme/js/jquery-migrate-1.2.1.min.js" type="text/javascript"></script>

   <script src="/theme/js/jquery.flexslider.js"></script>
   <script src="/theme/js/doubletaptogo.js"></script>
   <script src="/theme/js/init.js"></script>

      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/perl.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/bash.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/yaml.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/xml.min.js"></script>
      <script>
        hljs.configure({"languages":["perl","bash","yaml","xml"]});
        hljs.initHighlightingOnLoad();
      </script>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-110569629-1', 'auto');
      ga('send', 'pageview');
    </script>

</body>

</html>
