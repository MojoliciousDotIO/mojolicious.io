<!DOCTYPE html>
<!--[if lt IE 8 ]><html class="no-js ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="no-js ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 8)|!(IE)]><!--><html class="no-js" lang="en"> <!--<![endif]-->
<head>

  <meta charset="utf-8">
  <meta content="" name="description">

  <meta content="width=device-width, initial-scale=1, maximum-scale=1" name="viewport">

  <link href="/theme/css/default.css" rel="stylesheet">
  <link href="/theme/css/layout.css" rel="stylesheet">
  <link href="/theme/css/media-queries.css" rel="stylesheet">
  <link href="/theme/css/statocles.css" rel="stylesheet">

  <!-- twitter and opengraph -->
  <meta content="summary" name="twitter:card">
  <meta content="https://mojolicious.io/blog/tag/promises/" property="og:url">
  <meta content="mojolicious.io" property="og:title">
    <meta content="summary" name="twitter:card">

  <script src="/theme/js/modernizr.js"></script>

      <link href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/sunburst.min.css" rel="stylesheet">

  <title>mojolicious.io</title>
  <meta content="Statocles 0.097" name="generator">
  <link href="/blog/tag/promises.atom" rel="alternate" type="application/atom+xml">
  <link href="/blog/tag/promises.rss" rel="alternate" type="application/rss+xml">
  <link href="/static/favicon.ico" rel="shortcut icon">
  
  
</head>

<body>

   <header>

      <div class="row">

         <div class="twelve columns">

            <div class="logo">
               <a href="/index.html">
                 <h3 style="color: #fff">mojolicious.io</h3>
               </a>
            </div>

            <nav id="nav-wrap">

              <a class="mobile-btn" href="#nav-wrap" title="Show navigation">Show navigation</a>
              <a class="mobile-btn" href="#" title="Hide navigation">Hide navigation</a>

               <ul class="nav" id="nav">
                 <!-- li.current is given a different styling -->
                   <li><a href="/">Blog</a></li>
                   <li><span><a href="/page/advent/2018">Advent Calendar</a></span>
                     <ul>
                       <li><a href="/page/advent/2018">2018</a></li>
                       <li><a href="/page/advent/2017">2017</a></li>
                      </ul>
                   </li>
                   <li><span><a href="https://mojolicious.org">mojolicious.org</a></span>
                     <ul>
                       <li><a href="https://docs.mojolicious.org">Documentation</a></li>
                       <li><a href="https://docs.mojolicious.org/Mojolicious/Guides/Tutorial">Tutorial</a></li>
                      </ul>
                   </li>

               </ul>

            </nav>

         </div>

      </div>

   </header>

     <div id="page-title">

  <div class="row">

      <div class="ten columns centered text-center">
        <h1>The Mojolicious Blog<span>.</span></h1>

        <p>A semi-official blog dedicated to the Mojolicious web framework</p>
      </div>

  </div>

</div>



<div class="content-outer">

  <div class="row" id="page-content">

      <div class="eight columns" id="primary">

        <article class="post">

            <div class="entry-header cf">

            <h1><a href="/blog/2021/02/14/announcing-mojolicious-9-0/">Announcing Mojolicious 9.0</a></h1>

              <p class="post-meta">

                  <time class="date" datetime="2021-02-14">Feb 14, 2021</time>
                  

              </p>

            </div>

              <div class="post-thumb">
                <!-- theme suggests 1300x500 -->
                <img alt="Mojolicious cloud with text &quot;nine point oh&quot;" src="/blog/2021/02/14/announcing-mojolicious-9-0/nine_point_oh.png">
              </div>

            <div class="post-content">
              <p></p><p>The Mojolicious Core Team is delighted to announce the release and immediate availability of version 9.0 of the <a href="https://mojolicious.org">Mojolicious</a> real-time web framework.
Every Mojolicious major release has a <a href="https://docs.mojolicious.org/Mojolicious#CODE-NAMES">code name</a> based on a unicode character and this one is lovingly named &quot;Waffle&quot; ðŸ§‡!</p>

<p>Every major release I think that there can&#39;t be much more to add or change in Mojolicious and then when the next one arrives I reflect on how much has changed since I last thought that.
In <a href="https://metacpan.org/release/SRI/Mojolicious-9.0">9.0</a> there&#39;s far too much to discuss each at length, so I&#39;m going to highlight some of my favorites and then include a distilled list of changes since 8.0.</p>

<h2>Perl 5.16 and beyond</h2>

<p>Mojolicious now requires Perl version 5.16. This change gives us useful tools to build Mojolicious including the <code>__SUB__</code> token for building self-referential callbacks without leaking.
We were pleased that the community response since the change a few months ago has been ... well crickets.
This is great news since we do hope to move to Perl 5.20 in the not so distant future so that we can use Perl&#39;s native signatures once that is a sound option for us.
We are already encouraging the use of signatures both in the documentation and in our code generation commands.</p>

<h2>Asynchronous Functionality</h2>

<p>Clearly the highlight of the pre-9.0 development cycle has been the integration of Async/Await.
Thanks to Paul Evans (LeoNerd)&#39;s efforts, when you have <a href="https://metacpan.org/pod/Future::AsyncAwait">Future::AsyncAwait</a> installed Mojolicious can use its new keywords <code>async</code> and <code>await</code> to provide the most seamless asynchronous development possible, something that is becoming more and more the standard for asynchronous code in other languages.
Writing a non-blocking endpoint is now as simple as</p>

<pre><code>use Mojolicious::Lite -signatures, -async_await;

# Request HTML titles from two sites non-blocking
get &#39;/&#39; =&gt; async sub ($c) {
  my $mojo_tx    = await $c-&gt;ua-&gt;get_p(&#39;https://mojolicious.org&#39;);
  my $mojo_title = $mojo_tx-&gt;result-&gt;dom-&gt;at(&#39;title&#39;)-&gt;text;
  my $cpan_tx    = await $c-&gt;ua-&gt;get_p(&#39;https://metacpan.org&#39;);
  my $cpan_title = $cpan_tx-&gt;result-&gt;dom-&gt;at(&#39;title&#39;)-&gt;text;

  $c-&gt;render(json =&gt; {mojo =&gt; $mojo_title, cpan =&gt; $cpan_title});
};

app-&gt;start;
</code></pre>

<p>When I teach non-blocking to people I can now tell them to follow a trivial recipe for most non-blocking tasks.
Simply <code>await</code> any function that returns a promise and mark any function that uses <code>await</code> with the <code>async</code> keyword.
Note also that all <code>async</code> functions return promises so <code>await</code> any calls to them.
There are some optimizations you can make at times and top-level <code>await</code> (if you aren&#39;t in a Mojolicious webapp) can be a little strange but to a first approximation that&#39;s all you need to write a non-blocking webapp today!</p>

<p>Speaking of promises (which are at the heart of Async/Await), Mojo::Promise has grown a lot this cycle too, adding <code>all_settled</code>, <code>any</code>, <code>map</code>, <code>timer</code>, and <code>timeout</code> class methods, changing its constructor to be more like the one in JavaScript and to warn when an unhandled rejected promise is destroyed.
The latter can help in development where such cases used to hide errors, now, much like the browser, you can at least find where things are going wrong even if you didn&#39;t wire all your promises to a catch callback like you should.</p>

                  <p><a href="/blog/2021/02/14/announcing-mojolicious-9-0/#section-2">Continue reading Announcing Mojolicious 9.0...</a></p>
            </div>

        </article>
        <article class="post">

            <div class="entry-header cf">

            <h1><a href="/blog/2019/12/26/announcing-core-async-await/">Announcing Core async/await</a></h1>

              <p class="post-meta">

                  <time class="date" datetime="2019-12-26">Dec 26, 2019</time>
                  

              </p>

            </div>

              <div class="post-thumb">
                <!-- theme suggests 1300x500 -->
                <img alt="Radar dish at sunset" src="/blog/2019/12/26/announcing-core-async-await/radar.jpg">
              </div>

            <div class="post-content">
              <p></p><p>For years one of my primary tasks as a Mojolicious Core Team member has been to teach Mojolicious users the ins and outs of asynchronous programming.
We have championed several patterns to tame the beast and clean up async code, including continuation passing, promises and now async/await.
But while promises were a noted improvement over continuation passing, it is becoming more and more clear that the async/await pattern is a paradigm shift in asynchronous programming semantics.</p>

<p>I personally believe that it is far and away the easiest way to do nonblocking code in modern languages.
It might even reach the extent that languages and/or frameworks that do not support it are going to be in real trouble as new user will expect it to be available.
With <a href="https://en.wikipedia.org/wiki/Async/await">so many different languages</a> adopting the pattern, soon many may not have even been exposed to &quot;the old ways&quot; at all!</p>

<p>Last year, during the 2018 Mojolicious Advent Calendar, I <a href="https://mojolicious.io/blog/2018/12/24/async-await-the-mojo-way/">introduced</a> my <a href="https://metacpan.org/pod/Mojo::AsyncAwait">Mojo::AsyncAwait</a> library which was intended to address the immediate need for the Mojolicious community, based on the Mojolicious core promise module <a href="https://mojolicious.org/perldoc/Mojo/Promise">Mojo::Promise</a>.
It did rely on a &quot;controversial&quot; module (<a href="https://metacpan.org/pod/Coro">Coro</a>) to accomplish its task, and therefore it was not a good candidate for all users.</p>

<p>Meanwhile, others in the Perl community were noticing as well.
Paul Evans (LeoNerd) applied for and received <a href="https://news.perlfoundation.org/post/grant_proposal_futureasyncawai">a grant</a> from The Perl Foundation to build a low-level async/await mechanism for his <a href="https://metacpan.org/pod/Future">Future</a> promise library.
As that project has successfully culminated in <a href="https://metacpan.org/pod/Future::AsyncAwait">Future::AsyncAwait</a> on CPAN, the Mojolicious team has been engaging with Paul on a collaboration to allow Mojo::Promise to hook directly into it.</p>

<p>So without futher ado, the Mojolicious Core Team is very happy to announce that as of the most recent release of Mojolicious, async/await is now a built-in framework feature!</p>

                  <p><a href="/blog/2019/12/26/announcing-core-async-await/#section-2">Continue reading Announcing Core async/await...</a></p>
            </div>

        </article>
        <article class="post">

            <div class="entry-header cf">

            <h1><a href="/blog/2018/12/05/compound-selectors/">Day 5: Compound Selectors are Easier than Regexes</a></h1>

              <p class="post-meta">

                  <time class="date" datetime="2018-12-05">Dec  5, 2018</time>
                  

              </p>

            </div>

              <div class="post-thumb">
                <!-- theme suggests 1300x500 -->
                <img alt="Sled dogs waiting to run" src="/blog/2018/12/05/compound-selectors/banner.jpg">
              </div>

            <div class="post-content">
              <p></p><p>When people tell me that I can&#39;t (they mean shouldn&#39;t) parse HTML with a regex, I say &quot;hold my beer&quot;. It isn&#39;t a matter of skill or attitude so much as convenience. Doing it the right way was not always so easy (I remember HTML 0.9 being a big deal). Lately, though, I&#39;ve been using <a href="https://mojolicious.org/perldoc/Mojo/DOM">Mojo::DOM</a> to do it for me. It&#39;s easier than the old, expedient way.</p>

                  <p><a href="/blog/2018/12/05/compound-selectors/#section-2">Continue reading Day 5: Compound Selectors are Easier than Regexes...</a></p>
            </div>

        </article>
        <article class="post">

            <div class="entry-header cf">

            <h1><a href="/blog/2018/12/03/higher-order-promises/">Day 3: Higher Order Promises</a></h1>

              <p class="post-meta">

                  <time class="date" datetime="2018-12-03">Dec  3, 2018</time>
                  

              </p>

            </div>

              <div class="post-thumb">
                <!-- theme suggests 1300x500 -->
                <img alt="fractal cauliflower" src="/blog/2018/12/03/higher-order-promises/banner.jpg">
              </div>

            <div class="post-content">
              <p></p><h2>Create new, complex Promises by composing Promises</h2>

<p>Mojolicious 7.49 added an its own implementation of the <a href="https://promisesaplus.com">Promises/A+ specification</a>. mohawk wrote about these in <a href="https://mojolicious.io/blog/2017/12/14/day-14-you-promised-to-call/">Day 14: You Promised To Call!</a> of the 2017 Mojolicious Advent Calender where he showed you how to fetch many webpages concurrently. This Advent entry extends that with  more Promise tricks.</p>

                  <p><a href="/blog/2018/12/03/higher-order-promises/#section-2">Continue reading Day 3: Higher Order Promises...</a></p>
            </div>

        </article>
        <article class="post">

            <div class="entry-header cf">

            <h1><a href="/blog/2017/12/14/day-14-you-promised-to-call/">Day 14: You Promised To Call!</a></h1>

              <p class="post-meta">

                  <time class="date" datetime="2017-12-14">Dec 14, 2017</time>
                  

              </p>

            </div>

              <div class="post-thumb">
                <!-- theme suggests 1300x500 -->
                <img alt="Two hands with interlocked pinkies, a pinky swear" src="/blog/2017/12/14/day-14-you-promised-to-call/pinky_swear.jpg">
              </div>

            <div class="post-content">
              <p></p><p>A new feature of <a href="http://mojolicious.org/">Mojolicious</a>, as of <a href="https://metacpan.org/release/SRI/Mojolicious-7.49">7.49</a>, is the implementation of the <a href="https://promisesaplus.com/implementations#in-other-languages">Promises/A+ specification</a>. In this posting, we&#39;re going to use promises to implement non-blocking, parallel fetching of a number of web pages.</p>

                  <p><a href="/blog/2017/12/14/day-14-you-promised-to-call/#section-2">Continue reading Day 14: You Promised To Call!...</a></p>
            </div>

        </article>

        <nav class="col full pagination">
          <ul>
              <li><span class="page-numbers prev inactive">Prev</span></li>
              
              <li><span class="page-numbers next inactive">Next</span></li>
          </ul>
        </nav>

      </div>

      <div class="four columns end" id="secondary">
        <aside id="sidebar">
          







<div class="widget widget_tag_cloud">
  <h5 class="widget-title">Tags</h5>
  <div class="tagcloud cf">
    <a href="/blog/tag/administration/">administration</a>
    <a href="/blog/tag/advent/">advent</a>
    <a href="/blog/tag/angular/">Angular</a>
    <a href="/blog/tag/api/">api</a>
    <a href="/blog/tag/app/">app</a>
    <a href="/blog/tag/async-await/">async/await</a>
    <a href="/blog/tag/authentication/">authentication</a>
    <a href="/blog/tag/caching/">caching</a>
    <a href="/blog/tag/carton/">carton</a>
    <a href="/blog/tag/command/">command</a>
    <a href="/blog/tag/controller/">controller</a>
    <a href="/blog/tag/css/">css</a>
    <a href="/blog/tag/dancer/">dancer</a>
    <a href="/blog/tag/dbix-class/">DBIx::Class</a>
    <a href="/blog/tag/debugging/">debugging</a>
    <a href="/blog/tag/deployment/">deployment</a>
    <a href="/blog/tag/development/">development</a>
    <a href="/blog/tag/documentation/">documentation</a>
    <a href="/blog/tag/example/">example</a>
    <a href="/blog/tag/fluent/">fluent</a>
    <a href="/blog/tag/full/">full</a>
    <a href="/blog/tag/graphql/">graphql</a>
    <a href="/blog/tag/growing/">growing</a>
    <a href="/blog/tag/headers/">headers</a>
    <a href="/blog/tag/hello-world/">hello world</a>
    <a href="/blog/tag/html/">html</a>
    <a href="/blog/tag/installing/">installing</a>
    <a href="/blog/tag/javascript/">JavaScript</a>
    <a href="/blog/tag/ldap/">LDAP</a>
    <a href="/blog/tag/lite/">lite</a>
    <a href="/blog/tag/minion/">minion</a>
    <a href="/blog/tag/mocking/">mocking</a>
    <a href="/blog/tag/model/">model</a>
    <a href="/blog/tag/mojoconf/">mojoconf</a>
    <a href="/blog/tag/non-blocking/">non-blocking</a>
    <a href="/blog/tag/non-web/">non-web</a>
    <a href="/blog/tag/openapi/">openapi</a>
    <a href="/blog/tag/promises/">promises</a>
    <a href="/blog/tag/psgi/">psgi</a>
    <a href="/blog/tag/rendering/">rendering</a>
    <a href="/blog/tag/rest/">rest</a>
    <a href="/blog/tag/roles/">roles</a>
    <a href="/blog/tag/routing/">routing</a>
    <a href="/blog/tag/session/">session</a>
    <a href="/blog/tag/swagger/">swagger</a>
    <a href="/blog/tag/templates/">templates</a>
    <a href="/blog/tag/testing/">testing</a>
    <a href="/blog/tag/theme/">theme</a>
    <a href="/blog/tag/useragent/">useragent</a>
    <a href="/blog/tag/wishlist/">wishlist</a>
    <a href="/blog/tag/xml/">xml</a>
    <a href="/blog/tag/yancy/">yancy</a>
  </div>
</div>



        </aside>
      </div>

  </div>

</div>


   <footer>

      <div class="row">

         <div class="twelve columns">

            <ul class="footer-nav">
                <li><a href="/">Blog.</a></li>
                <li><a href="/page/advent/2018">Advent Calendar.</a></li>
                <li><a href="https://mojolicious.org">mojolicious.org.</a></li>
            </ul>

            <ul class="footer-social">
               <li><a href="https://github.com/mojolicious/mojo"><i class="fa fa-github"></i></a></li>
               <li><a href="https://twitter.com/search?q=%23mojolicious"><i class="fa fa-twitter"></i></a></li>
               <li><a href="/blog/index.rss"><i class="fa fa-rss"></i></a></li>
            </ul>

            <ul class="copyright">
                 <li>Copyright Â© 2017-2020 Joel Berger</li>
                <li><a href="https://github.com/MojoliciousDotIO/mojolicious.io">Contribute to this site on Github</a></li>
               <li>Design by <a href="http://www.styleshout.com/">Styleshout</a></li>
               <li>Made with <a href="http://preaction.me/statocles">Statocles</a></li>
               <li>Powered by <a href="http://www.perl.org">Perl</a></li>
            </ul>

         </div>

         <div id="go-top" style="display: block;"><a href="#" title="Back to Top">Go To Top</a></div>

      </div>

   </footer>

   <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
   <script>window.jQuery || document.write('<script src="/theme/js/jquery-1.10.2.min.js"><\/script>')</script>
   <script src="/theme/js/jquery-migrate-1.2.1.min.js" type="text/javascript"></script>

   <script src="/theme/js/jquery.flexslider.js"></script>
   <script src="/theme/js/doubletaptogo.js"></script>
   <script src="/theme/js/init.js"></script>

      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/perl.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/bash.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/yaml.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/xml.min.js"></script>
      <script>
        hljs.configure({"languages":["perl","bash","yaml","xml"]});
        hljs.initHighlightingOnLoad();
      </script>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-110569629-1', 'auto');
      ga('send', 'pageview');
    </script>

</body>

</html>
